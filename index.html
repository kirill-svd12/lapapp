<!DOCTYPE html>
<!--
  Для работы Google таблицы:
  1. Откройте нужную таблицу в Google Sheets → Файл → Опубликовать в интернете → Встроить → Скопируйте ссылку вида:
     https://docs.google.com/spreadsheets/d/e/ВАШ_ID/pubhtml?widget=true&headers=false
  2. Вставьте этот адрес в переменную googleSheetsUrl в <script> в <head>.

  Для изменения версии и даты обновления:
  - Измените значения переменных botVersion и lastUpdateDate в <script> в <head>.
-->
<html lang="ru" style="height: 100%;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LapApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script async
        src="https://telegram.org/js/telegram-widget.js?15"
        data-telegram-login="lapabot_bot"
        data-size="large"
        data-userpic="false"
        data-request-access="write"
        data-onauth="onTelegramAuth(user)"
    ></script>
    <script>
      // === Настройки приложения ===
      const botVersion = '1.0.0';
      const lastUpdateDate = '15.03.2024';
      const googleSheetsUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT9fzIQ878rfJa1xlMFpVfWUankyDTXY57A3xD4wPr2bIoKVjLS-9jlSHs_zDwAHXPsoP_sZpGm1tM7/pub?gid=0&single=true&output=csv';
      
      const botUsername = 'lapabot_bot'; // Имя вашего бота

      // === Ссылки на проекты ===
      const projectLinks = {
          actionGames: {
              stress18: 'https://telegra.ph/Proekt-Stress-06-16', // Проект стресс 18+
              lastOfUs18: 'https://telegra.ph/The-Last-of-Us-06-16-2', // The last of us 18+
              alkatras18: 'https://telegra.ph/Pryatki-v-Alkatrase-06-16', // Прятки в Алькатрасе 18+
          },
          immersive: {
              suspicion14: 'https://telegra.ph/Podozrenie-padaet-na-05-23', // Подозрение падает на 14+
              familyVow16: 'https://telegra.ph/Semejnyj-obet-05-23', // Семейный обет 16+
              insaneParanoid16: 'https://telegra.ph/Insane-Paranoid-06-16', // Insane Paranoid 16+
              whoHid12: 'https://telegra.ph/Kto-ne-spryatalsya-06-16', // Кто не спрятался 12+
          },
          escape: {
              moreDifficult: {
                  foris16: 'https://telegra.ph/Obekt-Foris-06-16',  // Объект форис 16+
                  arthur14: 'https://telegra.ph/Mech-korolya-Artura-06-16-2', // Меч короля Артура 14+(10+)
                  tenLittleIndians14: 'https://telegra.ph/Desyat-negrityat-06-16', // 10 негритят 14+
                  airCaptivity14: 'https://telegra.ph/Vozdushnyj-plen-06-16', // Воздушный плен 14+(10+)
                  inheritance14: 'https://telegra.ph/Vkus-nasledstva-06-16', // Вкус наследства 14+(11+)
              },
              lessDifficult: {
                  backToUSSR14: 'https://telegra.ph/Nazad-v-SSSR-perezagruzka-06-16', // Назад в СССР: перегрузка 14+(12+)
                  byTouch14: 'https://telegra.ph/Na-oshchup-06-16', // На ощупь 14+(12+)
                  pharaoh7riddles14: 'https://telegra.ph/7-zagadok-faraona-06-16', // 7 загадок фараона 14+(10+)
                  oblivionAvalanche14: 'https://telegra.ph/Lavina-zabveniya-06-16', // Лавина забвения 14+(8+)
              }
          },
          maniac: {
              wrongTurn16: 'https://telegra.ph/Povorot-ne-tuda-06-16', // Поворот не туда 16+
              uninvitedGuests12: 'https://telegra.ph/Nezvanye-gosti-06-16', // Незваные гости 12+
              fatum18: 'https://telegra.ph/Proekt-Fatum-06-16', // Проект Fatum 18+
          },
          mystic: {
              nightmares14: 'https://telegra.ph/Nightmares-06-16', // Nightmares 14+
              evilWithin16: 'https://telegra.ph/The-Evil-Within-06-16', // The Evil Within 16+
              outlast16: 'https://telegra.ph/Outlast-06-16', // Outlast 16+
              amnesia16: 'https://telegra.ph/Amnesia-06-16', // Amnesia 16+
              fear16: 'https://telegra.ph/Fear-06-16', // Fear 16+
              poltergeist16: 'https://telegra.ph/Poltergejst-06-16', // Полтергейст 16+
              fnaf18: 'https://telegra.ph/Five-Nights-at-Freddys-06-16-2', // Five Nights at Freddy's 18+(12+)
              saw16: 'https://telegra.ph/Pila-06-16', // Пила 16+
              it16: 'https://telegra.ph/Ono-06-16', // Оно 16+
              babadook15: 'https://telegra.ph/Babadook-06-16', // Babadook 15+(12+)
              gloom16: 'https://telegra.ph/Mgla-06-16', // Мгла 16+(12+)
              tarotDeathCard18: 'https://telegra.ph/Taro-karta-smerti-06-16', // Таро: карта смерти 18+(16+)
              gravediggers14: 'https://telegra.ph/Iskateli-mogil-06-16', // Искатели могил 14+
          },
          mixed: {
              aven14: 'https://telegra.ph/Lechebnica-sv-Avena-06-16', // Авен 14+
              rage16: 'https://telegra.ph/Rage-06-16', // Rage 16+
              momo14: 'https://telegra.ph/Momo-06-16', // Момо 14+
              deadInside12: 'https://telegra.ph/Dead-Inside-06-16', // Dead inside 12+
              ahs12: 'https://telegra.ph/Amerikanskaya-istoriya-uzhasov-06-16', // Американская история ужасов 12+
              sidr12: 'https://telegra.ph/Strashnye-istorii-dlya-rasskazov-v-temnote-06-15', // СИДР 12+
              scp14: 'https://telegra.ph/SCP-06-15', // Scp 14+
              forMoney14: 'https://telegra.ph/Za-dengi---da-06-15', // За деньги - да 14+(12+)
          }
      };
    </script>
    <style>
        :root {
            --primary-color: #FFB6C1;
            --secondary-color: #FFF0F5;
            --text-color: #4A4A4A;
            --bg-color: #FFFFFF;
            --button-text-color: #4A4A4A;
            --card-shadow: 0 8px 32px rgba(255, 182, 193, 0.15);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --gradient-start: #FFB6C1;
            --gradient-end: #FFC0CB;
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(255, 182, 193, 0.2);
            --accent-color: #FF69B4;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #FFFFFF 0%, #FFF0F5 100%);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            height: 100%;
            position: relative;
            overflow-x: hidden;
            background-attachment: fixed; /* Применено ко всем размерам экрана */
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 182, 193, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 192, 203, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        #app {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .screen {
            display: none;
            margin-bottom: 30px;
            animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.98);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .screen.active {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .text-content {
            background: var(--glass-bg);
            padding: 40px;
            border-radius: 30px;
            margin-bottom: 0;
            box-shadow: var(--card-shadow);
            font-size: 16px;
            line-height: 1.8;
            white-space: pre-wrap;
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
            transform: translateZ(0);
            grid-column: 1 / -1;
        }

        .text-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end));
            opacity: 0.8;
        }

        .button-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .button {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 20px 30px;
            margin: 0;
            background: var(--glass-bg);
            color: var(--button-text-color);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            cursor: pointer;
            text-align: left;
            font-size: 16px;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }

        .button::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                45deg,
                transparent,
                rgba(255, 182, 193, 0.1),
                transparent
            );
            transform: translateX(-100%);
            transition: 0.6s;
        }

        .button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 30px rgba(255, 182, 193, 0.25);
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .button:active {
            transform: translateY(-1px) scale(0.98);
        }

        .back-button {
            background: var(--glass-bg);
            color: var(--accent-color);
            font-weight: 500;
            border: 2px solid var(--accent-color);
            box-shadow: none;
            backdrop-filter: blur(8px);
            grid-column: 1 / -1;
            justify-content: center;
        }

        .back-button:hover {
            background: rgba(255, 182, 193, 0.1);
            transform: translateY(-2px);
        }

        /* Стили для квизов */
        .quiz-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .quiz-question {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--accent-color);
            text-align: center;
            text-shadow: 0 2px 4px rgba(255, 182, 193, 0.1);
        }

        .quiz-options {
            margin: 25px 0;
            padding: 30px;
            background: var(--glass-bg);
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        /* Стили для историй */
        .stories-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .story {
            margin: 0;
            padding: 30px;
            background: var(--glass-bg);
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            backdrop-filter: blur(8px);
        }

        .story:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(255, 182, 193, 0.2);
            border-color: var(--accent-color);
        }

        .story-title {
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--accent-color);
            font-size: 20px;
            text-shadow: 0 2px 4px rgba(255, 182, 193, 0.1);
        }

        /* Стили для видео-секции */
        .video-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 35px;
        }

        /* Адаптивный дизайн */
        @media (max-width: 768px) {
            #app {
                padding: 15px;
            }

            .button-container {
                grid-template-columns: 1fr;
            }

            .text-content {
                padding: 25px;
            }

            .quiz-options {
                grid-template-columns: 1fr;
            }
        }

        /* Анимации для переходов */
        .screen.active {
            animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(40px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        /* Стили для заголовков */
        h1, h2, h3 {
            color: var(--accent-color);
            margin-bottom: 25px;
            text-align: center;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(255, 182, 193, 0.1);
        }

        h1 {
            font-size: 36px;
            margin-bottom: 35px;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            font-size: 28px;
        }

        h3 {
            font-size: 24px;
        }

        /* Стили для эмодзи */
        .emoji {
            font-size: 1.4em;
            margin-right: 12px;
            filter: drop-shadow(0 2px 4px rgba(255, 182, 193, 0.2));
        }

        /* Стили для ссылок */
        a {
            color: var(--accent-color);
            text-decoration: none;
            transition: var(--transition);
            position: relative;
            font-weight: 500;
        }

        a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end));
            transition: var(--transition);
            opacity: 0.8;
        }

        a:hover::after {
            width: 100%;
        }

        /* Дополнительные стили */
        .features {
            background: var(--glass-bg);
            padding: 35px;
            border-radius: 25px;
            margin: 30px 0;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(8px);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .note {
            background: var(--glass-bg);
            padding: 25px 30px;
            border-radius: 20px;
            margin-top: 25px;
            font-style: italic;
            border-left: 5px solid var(--accent-color);
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(8px);
        }

        /* Стили для списков */
        .features p {
            margin: 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            transition: var(--transition);
            border: 1px solid var(--glass-border);
        }

        .features p:hover {
            transform: translateX(10px) scale(1.02);
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 5px 15px rgba(255, 182, 193, 0.1);
            border-color: var(--accent-color);
        }

        /* Дополнительные эффекты */
        .text-content, .button, .story, .features, .note {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Эффект параллакса для фона */
        @media (min-width: 768px) {
            body {
                background-attachment: fixed;
            }
        }

        /* Добавляем стили для логотипа */
        .logo {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-color);
            text-decoration: none;
            z-index: 1000;
            padding: 10px 20px;
            background: var(--glass-bg);
            border-radius: 15px;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(8px);
            transition: var(--transition);
            display: none; /* Скрыто по умолчанию */
        }

        .logo.visible { /* Новый класс для видимости */
            display: block;
        }

        .logo:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-shadow);
        }

        .logo-age {
            display: block;
            font-size: 14px;
            font-weight: 500;
            opacity: 0.7;
            margin-top: 2px;
            color: var(--text-color);
        }

        /* Стили для футера */
        .footer {
            /* position: fixed; */ /* УДАЛЕНО */
            /* bottom: -100px; */ /* УДАЛЕНО */
            left: 0;
            right: 0;
            background: var(--glass-bg);
            padding: 15px;
            text-align: center;
            font-size: 14px;
            color: var(--text-color);
            border-top: 1px solid var(--glass-border);
            backdrop-filter: blur(8px);
            z-index: 1000;
            /* transition: transform 0.3s ease-in-out; */ /* УДАЛЕНО */
            opacity: 0; /* Скрыто по умолчанию */
            transition: opacity 0.3s ease-in-out; /* Анимация появления/исчезновения */
            pointer-events: none; /* Не реагирует на события, когда скрыт */
        }

        .footer.visible {
            opacity: 1; /* Показываем футер */
            pointer-events: auto; /* Реагирует на события, когда виден */
            /* transform: translateY(-100px); */ /* УДАЛЕНО */
        }

        .footer p {
            margin: 5px 0;
        }

        /* Обновляем стили для основного контента */
        #app {
            padding-top: 80px;
            padding-bottom: 100px; /* Оставим, чтобы дать место для футера, если он будет внизу */
        }

        /* Обновляем стили для начального экрана */
        .welcome-screen {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            text-align: center;
        }

        .welcome-title {
            font-size: 42px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome-subtitle {
            font-size: 18px;
            color: var(--text-color);
            margin-bottom: 40px;
            opacity: 0.8;
        }

        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .main-menu .button {
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }

        .main-menu .emoji {
            font-size: 2em;
            margin-bottom: 10px;
        }

        /* Дополнительные стили для отображения данных из таблицы */
        .lapabalts-container {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Две колонки для имени и баллов */
            gap: 10px;
            background: var(--glass-bg);
            padding: 20px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(8px);
            margin-top: 20px;
            max-height: 450px; /* Ограничиваем высоту контейнера */
            overflow-y: auto; /* Добавляем прокрутку, если данных много */
        }

        .lapabalts-header {
            font-weight: 600;
            color: var(--accent-color);
            padding: 10px;
            border-bottom: 1px solid var(--glass-border);
            text-align: center;
        }

        .lapabalts-item {
            padding: 10px;
            border-bottom: 1px dashed var(--glass-border);
            text-align: center;
        }

        .lapabalts-item:nth-child(4n-1), .lapabalts-item:nth-child(4n) { /* Чередуем фон для строк данных */
            background-color: rgba(255, 182, 193, 0.05);
        }

        .lapabalts-item:last-child {
            border-bottom: none;
        }

        /* Стили для Telegram Login */
        #telegram-login-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: var(--glass-bg);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
        }

        /* Белый фон для экранов */
        .white-bg {
            background: #ffffff !important;
        }

        .white-bg::before {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Telegram Login Widget -->
    <div id="telegram-login-container">
        <script async
            src="https://telegram.org/js/telegram-widget.js?15"
            data-telegram-login="lapabot_bot"
            data-size="large"
            data-userpic="false"
            data-request-access="write"
            data-onauth="onTelegramAuth(user)"
        ></script>
    </div>

    <a href="#" class="logo" onclick="showScreen('initial-welcome'); return false;">
        Лапули
        <span class="logo-age">12+</span>
    </a>
    
    <div id="app">
        <!-- Новый начальный экран -->
        <div id="initial-welcome" class="screen active">
            <div class="welcome-screen">
                <h1 class="welcome-title">Добро пожаловать в LapApp!</h1>
                <p class="welcome-subtitle">Ваш проводник в мир квестов! Здесь вы найдете информацию о квестах, сможете посмотреть свои лапабаллы и многое другое.<br/>Чтобы посмотреть свои лапабаллы, перейдите в раздел "Интерактив".</p>
                <div class="main-menu">
                    <button class="button" onclick="showScreen('start')">
                        <span class="emoji">🚀</span>
                        Начать
                    </button>
                </div>
            </div>
        </div>

        <!-- Начальный экран (теперь главное меню) -->
        <div id="start" class="screen">
            <div class="welcome-screen">
                <h1 class="welcome-title">Главное меню</h1>
                <p class="welcome-subtitle">Выберите интересующий раздел</p>
                <div class="main-menu">
                    <button class="button" onclick="showScreen('project-selection')">
                        <span class="emoji">🎯</span>
                        Подбор проекта
                    </button>
                    <button class="button" onclick="showScreen('basic-info')">
                        <span class="emoji">📚</span>
                        Базовая информация
                    </button>
                    <button class="button" onclick="showScreen('advanced-info')">
                        <span class="emoji">🎓</span>
                        Продвинутая информация
                    </button>
                    <button class="button" onclick="showScreen('interactive')">
                        <span class="emoji">🎮</span>
                        Интерактив
                    </button>
                    <button class="button" onclick="showScreen('support')">
                        <span class="emoji">🛠️</span>
                        Тех. поддержка
                    </button>
                </div>
            </div>
        </div>

        <!-- Подбор проекта -->
        <div id="project-selection" class="screen">
            <div class="text-content">
                <h2>Отлично! Выберите интересующий вас жанр:</h2>
            </div>
            <button class="button" onclick="showScreen('action-games')">
                <span class="emoji">🏃</span>Экшен игры
            </button>
            <button class="button" onclick="showScreen('immersive')">
                <span class="emoji">🎭</span>Иммерсивные проекты
            </button>
            <button class="button" onclick="showScreen('escape')">
                <span class="emoji">🔐</span>Эскейпы
            </button>
            <button class="button" onclick="showScreen('maniac')">
                <span class="emoji">🔪</span>Маньячки
            </button>
            <button class="button" onclick="showScreen('mystic')">
                <span class="emoji">👻</span>Мистика
            </button>
            <button class="button" onclick="showScreen('mixed')">
                <span class="emoji">🎪</span>Смеси
            </button>
            <button class="button back-button" onclick="goBack()">
                <span class="emoji">⬅️</span>Назад
            </button>
        </div>

        <!-- Экшен игры -->
        <div id="action-games" class="screen">
            <div class="text-content">Да, их совсем немного!<br/>Если вам нравится экшен, есть возможность посетить версии других проектов, но в данном жанре:</div>
            <button class="button" onclick="window.open(projectLinks.actionGames.stress18, '_blank')">Проект стресс 18+</button>
            <button class="button" onclick="window.open(projectLinks.actionGames.lastOfUs18, '_blank')">The last of us 18+</button>
            <button class="button" onclick="window.open(projectLinks.actionGames.alkatras18, '_blank')">Прятки в Алькатрасе 18+</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Иммерсивные проекты -->
        <div id="immersive" class="screen">
            <div class="text-content">Хороших иммерсивных проектов, к сожалению, также мало. И найти альтернативные версии в данном жанре будет значительно труднее</div>
            <button class="button" onclick="window.open(projectLinks.immersive.suspicion14, '_blank')">Подозрение падает на 14+</button>
            <button class="button" onclick="window.open(projectLinks.immersive.familyVow16, '_blank')">Семейный обет 16+</button>
            <button class="button" onclick="window.open(projectLinks.immersive.insaneParanoid16, '_blank')">Insane Paranoid 16+</button>
            <button class="button" onclick="window.open(projectLinks.immersive.whoHid12, '_blank')">Кто не спрятался 12+</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Эскейпы -->
        <div id="escape" class="screen">
            <div class="text-content">А вот эскейпов уже значительно больше! Тут предоставлены лишь некоторые из них</div>
            <button class="button" onclick="showScreen('more-difficult')"><span class="emoji">⬆️</span>Более сложные</button>
            <button class="button" onclick="showScreen('less-difficult')"><span class="emoji">⬇️</span>Менее сложные</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Более сложные эскейпы -->
        <div id="more-difficult" class="screen">
            <div class="text-content">Более сложные эскейпы:</div>
            <button class="button" onclick="window.open(projectLinks.escape.moreDifficult.foris16, '_blank')">Объект форис 16+</button>
            <button class="button" onclick="window.open(projectLinks.escape.moreDifficult.arthur14, '_blank')">Меч короля Артура 14+(10+)</button>
            <button class="button" onclick="window.open(projectLinks.escape.moreDifficult.tenLittleIndians14, '_blank')">10 негритят 14+</button>
            <button class="button" onclick="window.open(projectLinks.escape.moreDifficult.airCaptivity14, '_blank')">Воздушный плен 14+(10+)</button>
            <button class="button" onclick="window.open(projectLinks.escape.moreDifficult.inheritance14, '_blank')">Вкус наследства 14+(11+)</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Менее сложные эскейпы -->
        <div id="less-difficult" class="screen">
            <div class="text-content">Менее сложные эскейпы:</div>
            <button class="button" onclick="window.open(projectLinks.escape.lessDifficult.backToUSSR14, '_blank')">Назад в СССР: перегрузка 14+(12+)</button>
            <button class="button" onclick="window.open(projectLinks.escape.lessDifficult.byTouch14, '_blank')">На ощупь 14+(12+)</button>
            <button class="button" onclick="window.open(projectLinks.escape.lessDifficult.pharaoh7riddles14, '_blank')">7 загадок фараона 14+(10+)</button>
            <button class="button" onclick="window.open(projectLinks.escape.lessDifficult.oblivionAvalanche14, '_blank')">Лавина забвения 14+(8+)</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Маньячки -->
        <div id="maniac" class="screen">
            <div class="text-content">С ними, к сожалению, тоже беда. При желании есть возможность пройти альтернативные маньячные версии на других проектах (Дед инсайд, мгла и сидр как пример)</div>
            <button class="button" onclick="window.open(projectLinks.maniac.wrongTurn16, '_blank')">Поворот не туда 16+</button>
            <button class="button" onclick="window.open(projectLinks.maniac.uninvitedGuests12, '_blank')">Незваные гости 12+</button>
            <button class="button" onclick="window.open(projectLinks.maniac.fatum18, '_blank')">Проект Fatum 18+</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Мистика -->
        <div id="mystic" class="screen">
            <div class="text-content">Проектов этого жанра огромное количество, на вкус и цвет</div>
            <button class="button" onclick="window.open(projectLinks.mystic.nightmares14, '_blank')">Nightmares 14+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.evilWithin16, '_blank')">The Evil Within 16+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.outlast16, '_blank')">Outlast 16+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.amnesia16, '_blank')">Amnesia 16+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.fear16, '_blank')">Fear 16+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.poltergeist16, '_blank')">Полтергейст 16+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.fnaf18, '_blank')">Five Nights at Freddy's 18+(12+)</button>
            <button class="button" onclick="window.open(projectLinks.mystic.saw16, '_blank')">Пила 16+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.it16, '_blank')">Оно 16+</button>
            <button class="button" onclick="window.open(projectLinks.mystic.babadook15, '_blank')">Babadook 15+(12+)</button>
            <button class="button" onclick="window.open(projectLinks.mystic.gloom16, '_blank')">Мгла 16+(12+)</button>
            <button class="button" onclick="window.open(projectLinks.mystic.tarotDeathCard18, '_blank')">Таро: карта смерти 18+(16+)</button>
            <button class="button" onclick="window.open(projectLinks.mystic.gravediggers14, '_blank')">Искатели могил 14+</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Смеси -->
        <div id="mixed" class="screen">
            <div class="text-content">Смеси включают в себя как элементы мистики, так и маньячки! Возможно наличие экшен-части</div>
            <button class="button" onclick="window.open(projectLinks.mixed.aven14, '_blank')">Авен 14+</button>
            <button class="button" onclick="window.open(projectLinks.mixed.rage16, '_blank')">Rage 16+</button>
            <button class="button" onclick="window.open(projectLinks.mixed.momo14, '_blank')">Момо 14+</button>
            <button class="button" onclick="window.open(projectLinks.mixed.deadInside12, '_blank')">Dead inside 12+</button>
            <button class="button" onclick="window.open(projectLinks.mixed.ahs12, '_blank')">Американская история ужасов 12+</button>
            <button class="button" onclick="window.open(projectLinks.mixed.sidr12, '_blank')">СИДР 12+</button>
            <button class="button" onclick="window.open(projectLinks.mixed.scp14, '_blank')">Scp 14+</button>
            <button class="button" onclick="window.open(projectLinks.mixed.forMoney14, '_blank')">За деньги - да 14+(12+)</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Базовая информация -->
        <div id="basic-info" class="screen">
            <div class="text-content">Мы разберем большую часть основных моментов и трудностей, которые чаще всего возникают у новичков

Материал достаточно объемный, так что в случае недопониманий: 

📌 Вопросы - @lapuly_quest

📌  Вопросы (анонимно) - https://t.me/anonimnyye_voprosy_bot?start=qwj6y

Выбирайте любую интересующую тему ниже!</div>
            <button class="button" onclick="showScreen('difficulty-level')">Уровень сложности</button>
            <button class="button" onclick="showScreen('age-restrictions')">Возрастные ограничения</button>
            <button class="button" onclick="showScreen('players-count')">Кол-во игроков</button>
            <button class="button" onclick="showScreen('time-passing')">Время прохождения</button>
            <button class="button" onclick="showScreen('quest-theme')">Тематика Квеста</button>
            <button class="button" onclick="showScreen('quest-history')">История появления квестов</button>
            <button class="button back-button" onclick="goBack()">Назад</button>
        </div>

        <!-- Уровень сложности -->
        <div id="difficulty-level" class="screen">
            <div class="text-content">Уровень сложности:

Так как квесты в реальности — это, прежде всего, игра, в них есть несколько уровней сложности. Вы можете выбрать легкий, средний или сложный квест. Чем же они различаются? Тут всё просто. Уровень сложности влияет на процесс самого квеста. В легком вас ждут простые и понятные задания, которые не требуют особых усилий или времени для прохождения. Сложный же квест, наоборот, будет наполнен множеством трудных задач, загадок и головоломок, с которыми просто так не справишься — придется приложить усилия. Поэтому если Вы отправляетесь на квест впервые — выбирайте легкий уровень. Так будет проще понять суть квестов в реальности как игры в целом, его принцип и цель. Если Вы уже не новичок — можете выбирать средний или сложный уровень. Тут уже зависит от предпочтений — кому-то нравятся сложные и запутанные задачки, а кто-то любит трудности в меру.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Возрастные ограничения -->
        <div id="age-restrictions" class="screen">
            <div class="text-content">Возрастные ограничения:

Многие говорят, что квесты подходят всем. Однако на деле это не совсем так. Далеко не все квесты охватывают одновременно все возраста. Зачастую бывает так, что квесты разделяют на детские и взрослые. Именно поэтому на каждом квесте обычно указывается возрастное ограничение. Конечно, бывают и квесты без возрастных ограничений. Поэтому смело можно организовать досуг сразу для всей семьи, и каждому будет интересно.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Кол-во игроков -->
        <div id="players-count" class="screen">
            <div class="text-content">Количество игроков:

Это еще один принцип, по которому различаются квесты в реальности. Чаще всего в квестах может принять участие от 2 до 4 игроков. Но некоторые игры позволяют проходить комнаты даже одному или в очень большой компании. Обычно количество игроков тесно сопряжено с сюжетом квеста, обилию загадок и уровнем сложности. Логично, что в легких квестах не требуется внимание целой толпы, и такую игру может пройти один участник. А вот если сюжет действительно сложный  и требует повышенного внимания — то тут чем больше глаз, тем лучше. Однако не все любят проходить квесты в большой компании. И это тоже учитывается при создании квестов. Чаще всего, их проходят вдвоем или вчетвером. Поэтому это наиболее встречающиеся варианты разбивки игроков: от 2 до 4 человек.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Время прохождения -->
        <div id="time-passing" class="screen">
            <div class="text-content">Время прохождения:

В принципе, все вышеуказанное зачастую влияет и на общую протяженность квеста. Чаще всего, квест в реальности длится 60 минут. Но есть и те, которые ограничены 40 минутами или, наоборот, 90. Тут всё зависит, опять же-таки от того, насколько сложный квест и сколько игроков в него могут играть одновременно. Кому-то может показаться, что 60 минут — слишком много. Однако в процессе игры это время всегда проходит незаметно, и Вы даже можете не успеть пройти квест за это время. Так что если Вы особенно усидчивый и трепетно относитесь к деталям — выбирайте тот квест, который длится подольше.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Тематика квеста -->
        <div id="quest-theme" class="screen">
            <div class="text-content">Тематика квеста:

Пожалуй, это самая интересная классификация квестов. И ее мы разберем наиболее подробно. Если с количеством игроков и возрастными ограничениями все ясно, то тематика и жанр квестов — одна из интереснейших особенностей. И тут есть несколько подводных камней, в которых стоит разобраться детально. Знание тем квестов поможет Вам максимально точно определиться с выбором и найти игру по душе.</div>
            <button class="button" onclick="showScreen('genres')"><span class="emoji">🎭</span>Жанры</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Жанры -->
        <div id="genres" class="screen">
            <div class="text-content">Каждый квест относится к определенному жанру. Существует множество классификаций, но мы постараемся кратко описать основные 

Разбираться в жанрах важно, чтобы понимать свои предпочтения и исходя из этого выбирать проекты</div>
            <button class="button" onclick="showScreen('main-categories')"><span class="emoji">🗝️</span>Основные категории</button>
            <button class="button" onclick="showScreen('additional-categories')"><span class="emoji">➕</span>Дополнительные категории</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Основные категории -->
        <div id="main-categories" class="screen">
            <div class="text-content">
                🔐Классический квест («эскейп-рум») - классический квест, где вы оказываетесь в помещении, полном загадок и головоломок. Задача - выбраться за отведенное время, используя найденные предметы и подсказки 


                🏃Экшн-игра - направление, требующее физической активности и взаимодействий, скорости, реакции. Часто присутствуют элементы поиска предметов и соревновательный характер


                🎭Перфоманс - интерактивная игра с участием актеров, где игроки становятся главными героями. Жанр подразумевает взаимодействие с персонажами, влияющих на развитие событий, и театральные сцены.  

                Перфоманс имеет множество разветвлений:

                1). Мистика - характеризуется необъяснимыми явлениями, сверхъестественными элементами и акцентом на скримерах 

                2). Маньячка - отличается преследованием, постоянным напряжением и угрозой со стороны персонажа. Акцент на динамике, интерактиве и словесном и не только контакте  

                3). Иммерсивки - интерактивное театральное представление, где игроки погружаются в сюжет и становятся участниками событий. Акцент на сценарии, актерской игре и взаимодействии 

                4). Смеси -квест может содержать в себе элементы нескольких жанров</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Дополнительные категории -->
        <div id="additional-categories" class="screen">
            <div class="text-content">Многие квесты предлагают не только классическую версию, но и другие варианты для повторных посещений:

Экшн-версия - версия, персонажи которой уже знакомы вам из классической игры. Отличается большим количеством физической активности и взаимодействий

Альтернативная версия - совершенно новая игра, не имеющая ничего общего с оригинальным сюжетом. Полностью меняется история, появляются новые персонажи, и меняется цепочка действий.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- История появления квестов -->
        <div id="quest-history" class="screen">
            <div class="text-content">История появления квестов:

Квест (в переводе с анг. «quest» – «поиск») – это интерактивная игра с увлекательной сюжетной линией. Ее участники попадают в закрытое помещение, из которого нужно выбраться за 60 минут. Сегодня эскейп-комнатами в реальности уже никого не удивишь, а их разнообразие увеличивается с каждым годом. Почему квесты получили такую популярность, и какова история их развития?


Впервые о них услышали в 60-х годах прошлого столетия благодаря компьютерной игре «Crimson Rооm». Главный герой, оказавшийся взаперти красной комнаты, должен был выбраться наружу, используя при этом элементы интерьера. Все 13 предметов были связаны между собой единой логической цепочкой. Геймеры часами просиживали у компьютера, проверяя свою сообразительность. В течение нескольких лет вышел целый ряд виртуальных квестов с более закрученным сюжетом: «Viridian Rооm», «Blue Chamber» и «White Chamber».


Позднее, когда вычислительная техника достигла следующего этапа развития, возникло новое направление – графические квесты. Первой компьютерной игрой в жанре приключений стала «Mystery House», выпущенная в 1980 году. Эскейп-рум был создан по мотивам книги Агаты Кристи «Десять негритят» и разошелся тиражом в несколько тысяч экземпляров. От обычных игр он отличался наличием декоративных иллюстраций. Игрок по-прежнему управлял персонажем в то время, как статичное изображение стимулировало его фантазию. Спустя несколько лет фирма LucasArts полностью отошла от текстового интерфейса, оперируя рисованными объектами и насыщенным цветовым оформлением.


Однако программистам не могло прийти в голову, что спустя полстолетия виртуальные сценарии преобразуются в реальные истории, завоевав признание миллионов людей по всему миру. В какой-то момент компьютерные игры показались геймерам невероятно скучными. В начале 2000-хх годов у них появилась идея создания реалити-квеста, что вывело развлекательную индустрию на новый уровень. После Китая и Японии такие игры начали появляться на территории стран Европы и СНГ. Первые эскейп-комнаты были построены на базе хостелов и квартир, имели скудный интерьер и незамысловатые загадки.

 

На территории России первый квест был оборудован сравнительно недавно – в 2013 году. Его первооткрывателем стал московский бизнесмен Сергей Кузнецов, основатель  известной компании «Клаустрофобия». Эскейп-комната была оформлена в стиле психиатрической больницы и обошлась в 1,2 млн. руб. С ростом инвестирования локации подвергались ремонту. Как сознаются разработчики, их первые квесты были самыми лучшими. Несмотря на то, что проект рассматривался, как кратковременное развлечение, игры имели сильную сюжетную линию с завязкой и кульминаций. Партнеры рассчитывали, что вложения окупятся лишь через год-полтора, но деньги вернулись уже через два месяца. Отбоя от желающих найти выход из закрытой комнаты не было, несмотря на то, что организаторы не вкладывались в рекламу.

 

В течение следующих двух лет подобный вид развлечения на территории России стал очень популярным. Предприниматели поняли, что здесь освободилась ниша для прибыльного бизнеса. Всего два-три месяца – и небольшое вложение окупится с лихвой. Присмотревшись к создателям «Клаустрофобии», они начали развивать свою деятельность по франшизе. Реалити-квесты стали открываться в Санкт-Петербурге, Новосибирске, Екатеринбурге, Омске. С появлением конкурентов рынок переполнился. Сегодня в России существует более 200 компаний, которым принадлежат около 900 эскейп-комнат. Еще 250 локаций ждут своего открытия в ближайшем будущем. Их создатели придумывают изощренные головоломки для желающих пощекотать нервы. А легендарная «Клаустрофобия» планирует продавать франшизу в Европу и Америку.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Продвинутая информация -->
        <div id="advanced-info" class="screen">
            <div class="text-content">Мы разберем большую часть основных моментов и трудностей, которые чаще всего возникают у новичков

Материал достаточно объемный, так что в случае недопониманий: 

📌 Вопросы - @lapuly_quest

📌  Вопросы (анонимно) - https://t.me/anonimnyye_voprosy_bot?start=qwj6y

Выбирайте любую интересующую тему ниже!</div>
            <button class="button" onclick="showScreen('first-quest')">Подбор первого квеста</button>
            <button class="button" onclick="showScreen('booking')">Бронь</button>
            <button class="button" onclick="showScreen('special-versions')">Спецухи</button>
            <button class="button" onclick="showScreen('tgk-communities')">Тгк, сообщества</button>
            <button class="button" onclick="showScreen('team-search')">Поиск команды</button>
            <button class="button back-button" onclick="goBack()">Назад</button>
        </div>

        <!-- Подбор первого квеста -->
        <div id="first-quest" class="screen">
            <div class="text-content">Подбор первого квеста:

Выбор первого квеста — это очень важный момент. От него зависит, понравится ли вам этот вид развлечения в целом. Поэтому к выбору стоит подойти с особой тщательностью. 

Вот несколько советов, которые помогут вам выбрать идеальный первый квест:

1. Обратите внимание на уровень сложности. Для первого раза лучше выбрать легкий квест. Так вы сможете понять суть игры и не разочароваться в самом процессе.

2. Выбирайте квест с интересной для вас тематикой. Если вы любите детективы — выбирайте детективный квест, если ужастики — хоррор. Это поможет вам быстрее погрузиться в атмосферу.

3. Учитывайте количество игроков. Для первого раза лучше идти компанией из 2-4 человек. Так будет проще решать загадки и не так страшно.

4. Читайте отзывы. Они помогут понять, насколько квест соответствует описанию и подходит ли он для новичков.

5. Обратите внимание на возрастные ограничения. Убедитесь, что квест подходит всем участникам вашей компании.

Помните, что первый квест должен оставить приятные впечатления и желание вернуться за новыми эмоциями!</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Бронь -->
        <div id="booking" class="screen">
            <div class="text-content">Бронь:

Бронирование квеста — это важный этап подготовки к игре. Вот несколько важных моментов, которые стоит учесть при бронировании:

1. Выбирайте удобное время. Учитывайте, что квест длится 60 минут, плюс время на инструктаж и разбор полетов. Лучше прийти заранее, чтобы не спешить.

2. Проверьте наличие свободных мест. Особенно это важно в выходные и праздничные дни, когда желающих поиграть больше.

3. Уточните условия бронирования. Некоторые квесты требуют предоплаты, другие позволяют оплатить на месте.

4. Если вы идете компанией, убедитесь, что все участники подтвердили свое участие. Это поможет избежать недопонимания в последний момент.

5. В случае необходимости отмены, узнайте условия возврата денег. Обычно это возможно за 24 часа до начала игры.

Правильное бронирование — залог приятного времяпрепровождения!</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Спецухи -->
        <div id="special-versions" class="screen">
            <div class="text-content">Специальные версии:

Многие квесты предлагают специальные версии для особых случаев или компаний. Вот основные типы:

1. Детские квесты — адаптированы под возраст участников, с более простыми загадками и ярким оформлением.

2. Романтические квесты — идеальны для пар, с особым вниманием к атмосфере и интимности.

3. Корпоративные квесты — направлены на тимбилдинг, с заданиями на командную работу.

4. Праздничные версии — специально оформленные квесты к Новому году, Хэллоуину и другим праздникам.

5. Ночные квесты — проходят в темное время суток, с особым акцентом на атмосферу.

6. VIP-версии — с дополнительными услугами, индивидуальным обслуживанием и особыми бонусами.

Выбор специальной версии зависит от повода и компании, с которой вы планируете посетить квест.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Тгк, сообщества -->
        <div id="tgk-communities" class="screen">
            <div class="text-content">Телеграм-сообщества:

Телеграм-сообщества — это отличный способ быть в курсе новостей квест-индустрии и находить единомышленников. Вот основные типы сообществ:

1. Официальные каналы квест-комнат — здесь публикуются новости, акции и специальные предложения.

2. Обзоры и рейтинги — каналы, где опытные игроки делятся впечатлениями и оценивают квесты.

3. Чат-сообщества — места для общения любителей квестов, обмена опытом и поиска компании.

4. Новостные каналы — публикуют информацию о новых квестах, закрытиях и изменениях в индустрии.

5. Тематические сообщества — посвящены определенным жанрам квестов или городам.

Участие в телеграм-сообществах поможет вам быть в курсе событий и находить новых друзей по интересам.</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Поиск команды -->
        <div id="team-search" class="screen">
            <div class="text-content">Поиск команды:

Поиск команды для прохождения квеста — важный этап подготовки. Вот несколько способов найти подходящих игроков:

1. Телеграм-чаты — специальные сообщества для поиска команды.

2. Социальные сети — группы и сообщества любителей квестов.

3. Сайты квест-комнат — часто имеют разделы для поиска команды.

4. Друзья и знакомые — самый надежный способ собрать проверенную команду.

При поиске команды учитывайте:

- Уровень опыта игроков
- Предпочтения по жанрам
- Возрастные ограничения
- Количество человек
- Удобное время для всех

Правильно подобранная команда — залог успешного прохождения квеста!</div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Интерактив -->
        <div id="interactive" class="screen">
            <div class="text-content">Выберите интересующий вас интерактивный контент</div>
            <button class="button" onclick="showScreen('google-sheets')">Посмотреть свои лапабаллы</button>
            <button class="button back-button" onclick="goBack()">Назад</button>
        </div>

        <!-- Google таблицы -->
        <div id="google-sheets" class="screen">
            <div class="text-content">
                <h2>Лапабаллы пользователей</h2>
                <div id="lapabalts-data" class="lapabalts-container">
                    <p>Загрузка данных...</p>
                </div>
            </div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Тех. поддержка -->
        <div id="support" class="screen">
            <div class="text-content">Bot by <a href="https://t.me/lapuliquest" target="_blank">https://t.me/lapuliquest</a><br/><br/>Idea @j_S_T_R, @makcgrechenkov<br/>Code @svedushev</div>
            <button class="button" onclick="showScreen('bot-issues')"><span class="emoji">⚠️</span>В боте что-то не работает</button>
            <button class="button" onclick="showScreen('user-agreement')"><span class="emoji">📄</span>Пользовательское соглашение</button>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- В боте что-то не работает -->
        <div id="bot-issues" class="screen">
            <div class="text-content">Если у вас возникли проблемы с ботом, пожалуйста, напишите нам в поддержку: <a href="https://t.me/lapuly_quest" target="_blank">@lapuly_quest</a></div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>

        <!-- Пользовательское соглашение -->
        <div id="user-agreement" class="screen">
            <div class="text-content">
                <h2>Пользовательское соглашение Telegram-мини-приложения LapApp</h2>

                <p><b>Дата последнего обновления:</b> 17 июня 2025 г.</p>

                <p>Настоящее Пользовательское соглашение (далее — «Соглашение») определяет условия использования Telegram-мини-приложения LapApp (далее — «Приложение»), созданного физическим лицом (далее — «Владелец»), и представляет собой юридически обязательное соглашение между Владельцем и любым пользователем Приложения (далее — «Пользователь»).</p>

                <h3>1. Описание Приложения</h3>
                <p>Приложение предназначено для помощи новичкам и опытным игрокам в квест-индустрии. Оно реализовано как Telegram-мини-приложение и связано с телеграм-каналом, посвящённым квестам. В частности, приложение отображает рейтинг игроков по количеству так называемых «лапабаллов» (внутренних баллов активности), помогает отслеживать активность участников и вовлекает в игровой процесс.</p>

                <h3>2. Условия использования</h3>
                <ul>
                    <li>Использование Приложения допускается с 12 лет и старше.</li>
                    <li>Приложение предназначено только для личного, некоммерческого использования.</li>
                    <li>Пользователь соглашается с тем, что использование Приложения осуществляется добровольно и «как есть».</li>
                </ul>

                <h3>3. Сбор и обработка данных</h3>
                <p>Приложение собирает и обрабатывает минимальный объём персональных данных, строго необходимый для функционирования:</p>
                <ul>
                    <li>Telegram-юзернейм (если он есть)</li>
                    <li>Количество набранных лапабаллов (внутренние игровые очки)</li>
                </ul>
                <p>Эти данные не передаются третьим лицам, не продаются, не публикуются публично и используются исключительно для отображения рейтинга в рамках Приложения.</p>
                <p>Данные хранятся в Google Таблицах, к которым имеет доступ только Владелец.</p>

                <h3>4. Интеграции</h3>
                <p>Приложение использует:</p>
                <ul>
                    <li>Google Таблицы — для хранения игровой информации.</li>
                    <li>Потенциальную интеграцию с платформой «Мир Квестов» (если такая появится в будущем).</li>
                </ul>

                <h3>5. Ограничение ответственности</h3>
                <ul>
                    <li>Владелец не несёт ответственности за сбои в работе Telegram или сторонних сервисов (Google и др.).</li>
                    <li>Владелец не гарантирует непрерывную или безошибочную работу Приложения.</li>
                    <li>Пользователь самостоятельно несёт ответственность за использование Приложения в соответствии с законами своей страны.</li>
                </ul>

                <h3>6. Интеллектуальная собственность</h3>
                <p>Все тексты, логика работы и структура Приложения являются интеллектуальной собственностью Владельца. Запрещается копировать, воспроизводить или использовать элементы Приложения без письменного разрешения Владельца.</p>

                <h3>7. Заключительные положения</h3>
                <ul>
                    <li>Владелец оставляет за собой право изменять настоящее Соглашение в любое время. Актуальная версия будет доступна по ссылке внутри Приложения или на официальной странице.</li>
                    <li>Продолжая использование Приложения, Пользователь автоматически соглашается с новой версией Соглашения.</li>
                </ul>

                <h3>Связь с владельцем</h3>
                <p>По всем вопросам, касающимся использования Приложения или настоящего Соглашения, Пользователь может обращаться к Владельцу по следующим контактным данным:</p>
                <ul>
                    <li>Владелец: физическое лицо, зарегистрированное в г. Москва, Россия.</li>
                    <li>Контакт в Telegram: <a href="https://t.me/lapuly_quest" target="_blank">@lapuly_quest</a></li>
                </ul>
            </div>
            <button class="button back-button" onclick="goBack()"><span class="emoji">⬅️</span>Назад</button>
        </div>
    </div>

    <div class="footer">
        <p id="footer-version"></p>
        <p>© 2024-2025 Лапули. Все права защищены.</p>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let history = ['initial-welcome'];
        let currentUser = null;
        
        // Список экранов с белым фоном
        const whiteBgScreens = [
            'project-selection', 'action-games', 'immersive', 'escape', 'more-difficult', 'less-difficult', 'maniac', 'mystic', 'mixed',
            'basic-info', 'difficulty-level', 'age-restrictions', 'players-count', 'time-passing', 'quest-theme', 'genres', 'main-categories', 'additional-categories', 'quest-history',
            'advanced-info', 'first-quest', 'booking', 'special-versions', 'tgk-communities', 'team-search',
            'interactive', 'google-sheets', 'support', 'bot-issues', 'user-agreement'
        ];
        
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            const targetScreen = document.getElementById(screenId);
            targetScreen.classList.add('active');
            history.push(screenId);

            // Управление фоном
            if (whiteBgScreens.includes(screenId)) {
                document.body.classList.add('white-bg');
            } else {
                document.body.classList.remove('white-bg');
            }

            const logo = document.querySelector('.logo');
            if (screenId === 'initial-welcome') {
                logo.classList.add('visible');
            } else {
                logo.classList.remove('visible');
            }

            if (screenId === 'google-sheets') {
                loadLapabalts();
            }
        }

        function goBack() {
            if (history.length > 1) {
                history.pop();
                const previousScreen = history[history.length - 1];
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(previousScreen).classList.add('active');
                
                // Управление фоном при возврате
                if (whiteBgScreens.includes(previousScreen)) {
                    document.body.classList.add('white-bg');
                } else {
                    document.body.classList.remove('white-bg');
                }
            }
        }

        // Telegram авторизация
        function onTelegramAuth(user) {
            currentUser = user;
            document.getElementById('telegram-login-container').style.display = 'none';
            
            // Показываем приложение после авторизации
            showScreen('initial-welcome');
        }

        // Функция для обработки прокрутки
        function handleScroll() {
            const footer = document.querySelector('.footer');
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight;
            const clientHeight = document.documentElement.clientHeight;
            
            if (scrollTop + clientHeight >= scrollHeight - 5) {
                footer.classList.add('visible');
            } else {
                footer.classList.remove('visible');
            }
        }

        // Добавляем обработчик прокрутки
        window.addEventListener('scroll', handleScroll);

        // Инициализация Telegram WebApp
        tg.expand();
        tg.enableClosingConfirmation();

        // Установка версии и даты в футер
        document.getElementById('footer-version').textContent = `Версия ${botVersion} | Последнее обновление: ${lastUpdateDate}`;

        // === Функции для работы с Google Таблицами ===
        async function loadLapabalts() {
            const dataContainer = document.getElementById('lapabalts-data');
            dataContainer.innerHTML = '<p>Загрузка данных...</p>';

            try {
                const response = await fetch(googleSheetsUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const csvText = await response.text();
                
                const rows = csvText.split(/\r?\n/).map(row => row.trim()).filter(row => row.length > 0);
                
                if (rows.length < 2) {
                    dataContainer.innerHTML = '<p>Данные не найдены или таблица пуста.</p>';
                    return;
                }

                dataContainer.innerHTML = '';

                // Добавляем заголовки
                dataContainer.innerHTML += `<div class="lapabalts-header">Имя пользователя Telegram</div><div class="lapabalts-header">Лапабаллы</div>`;

                // Пропускаем первую строку (заголовки) и обрабатываем остальные
                for (let i = 1; i < rows.length; i++) {
                    const cols = rows[i].split(',');
                    if (cols.length >= 2) {
                        const username = cols[0].trim();
                        const lapabalts = cols[1].trim();
                        dataContainer.innerHTML += `<div class="lapabalts-item">${username}</div><div class="lapabalts-item">${lapabalts}</div>`;
                    }
                }

            } catch (error) {
                console.error('Ошибка загрузки данных:', error);
                dataContainer.innerHTML = '<p>Не удалось загрузить данные. Проверьте ссылку и настройки публикации таблицы.</p>';
            }
        }
    </script>
</body>
</html>
